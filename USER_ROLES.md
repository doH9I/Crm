# Система ролей и пользователей Construction CRM

## Пользователи системы

В системе предустановлено 4 пользователя с различными ролями и правами доступа:

### 1. Главный Администратор
- **Email:** `admin@construction-crm.ru`
- **Пароль:** `admin123`
- **Роль:** Administrator
- **Права доступа:** Полный доступ ко всем разделам системы
- **Отдел:** Управление
- **Должность:** Системный администратор

### 2. Менеджер Проектов
- **Email:** `manager@construction-crm.ru`
- **Пароль:** `manager123`
- **Роль:** Manager
- **Права доступа:** Проекты, Сметы, Сотрудники, Финансы, Календарь, Отчеты, Настройки
- **Отдел:** Управление проектами
- **Должность:** Старший менеджер проектов

### 3. Мастер Строительства
- **Email:** `foreman@construction-crm.ru`
- **Пароль:** `foreman123`
- **Роль:** Foreman
- **Права доступа:** Проекты, Материалы, Инструменты, Сотрудники, Календарь
- **Отдел:** Производство
- **Должность:** Прораб

### 4. Главный Бухгалтер
- **Email:** `accountant@construction-crm.ru`
- **Пароль:** `accountant123`
- **Роль:** Accountant
- **Права доступа:** Сметы, Финансы, Отчеты
- **Отдел:** Финансы
- **Должность:** Главный бухгалтер

## Система ролей

### Доступные роли:
1. **ADMIN** - Администратор (полный доступ)
2. **MANAGER** - Менеджер проектов
3. **FOREMAN** - Мастер/Прораб
4. **WORKER** - Рабочий
5. **ACCOUNTANT** - Бухгалтер
6. **ARCHITECT** - Архитектор
7. **ENGINEER** - Инженер
8. **SAFETY_OFFICER** - Инженер по ТБ
9. **QUALITY_CONTROLLER** - Контролер качества
10. **PROCUREMENT_MANAGER** - Менеджер по закупкам
11. **LOGISTICS_COORDINATOR** - Координатор логистики

### Разделы системы:
- **Dashboard** - Главная панель
- **Projects** - Проекты
- **Estimates** - Сметы
- **Materials** - Материалы
- **Tools** - Инструменты
- **Employees** - Сотрудники
- **Finances** - Финансы
- **Calendar** - Календарь
- **Reports** - Отчеты
- **Settings** - Настройки
- **Profile** - Профиль пользователя

## Права доступа по ролям

### Администратор (ADMIN)
- ✅ Все разделы системы
- ✅ Все действия (чтение, запись, удаление, утверждение, управление)

### Менеджер проектов (MANAGER)
- ✅ Dashboard, Projects, Estimates, Employees, Finances, Calendar, Reports, Settings, Profile
- ❌ Materials, Tools (ограниченный доступ)

### Мастер/Прораб (FOREMAN)
- ✅ Dashboard, Projects, Materials, Tools, Employees, Calendar, Profile
- ❌ Estimates, Finances, Reports, Settings

### Рабочий (WORKER)
- ✅ Dashboard, Projects, Calendar, Profile
- ❌ Остальные разделы

### Бухгалтер (ACCOUNTANT)
- ✅ Dashboard, Estimates, Finances, Reports, Profile
- ❌ Projects, Materials, Tools, Employees, Calendar, Settings

## Функциональность системы прав

### 1. Проверка доступа к разделам
- Боковая панель автоматически скрывает недоступные разделы
- При попытке прямого доступа к запрещенному разделу показывается страница "Доступ ограничен"

### 2. Защита роутов
- Все маршруты защищены компонентом `ProtectedRoute`
- Автоматическое перенаправление на страницу с ограничениями доступа

### 3. Информация о пользователе
- В меню профиля отображается:
  - Имя пользователя
  - Роль
  - Отдел (если указан)

### 4. Гибкая система разрешений
- Поддержка как ролевых, так и индивидуальных разрешений
- Возможность расширения системы ролей
- Поддержка глобального разрешения "*" для полного доступа

## Техническая информация

### Хуки и компоненты:
- `usePermissions` - основной хук для проверки прав доступа
- `ProtectedRoute` - компонент защиты роутов
- Система автоматической фильтрации навигации в `Sidebar`

### Основные функции:
- `canAccess(module)` - проверка доступа к модулю
- `canWrite(module)` - проверка прав записи
- `canDelete(module)` - проверка прав удаления
- `isAdmin()` - проверка административных прав
- `getAccessibleModules()` - получение списка доступных модулей

## Расширение системы

Для добавления новых ролей или изменения прав доступа:

1. **Добавление роли:** Обновите enum `UserRole` в `src/types/index.ts`
2. **Настройка прав:** Обновите `ROLE_PERMISSIONS` в `src/hooks/usePermissions.ts`
3. **Добавление пользователя:** Обновите массив users в `src/store/index.ts`

Система спроектирована для легкого расширения и масштабирования.