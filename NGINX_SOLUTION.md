# üåê NGINX –†–ï–®–ï–ù–ò–ï - –§–ò–ù–ê–õ–¨–ù–û–ï –ò –õ–£–ß–®–ï–ï!

## üéØ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê NGINX:

‚úÖ **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã** - Nginx –æ—Ç–¥–∞–µ—Ç CSS/JS –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ Node.js  
‚úÖ **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º HTTP/HTTPS** - Nginx –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏  
‚úÖ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤  
‚úÖ **–°–∂–∞—Ç–∏–µ** - Gzip —Å–∂–∞—Ç–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - Nginx –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏  
‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç 80** - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∏–≤—ã—á–Ω–æ–º –ø–æ—Ä—Ç—É  

## üöÄ –£–°–¢–ê–ù–û–í–ö–ê –ò –ù–ê–°–¢–†–û–ô–ö–ê:

### 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
# –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Nginx —Ä–µ—à–µ–Ω–∏—è:
nginx.conf              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
server_api_only.js      # API —Å–µ—Ä–≤–µ—Ä –±–µ–∑ —Å—Ç–∞—Ç–∏–∫–∏  
setup_nginx.sh          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
init_database.js        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
.env                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É:
```bash
ssh root@79.174.85.87
cd /root/Crm
chmod +x setup_nginx.sh
sudo ./setup_nginx.sh
```

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø:

```
–ë—Ä–∞—É–∑–µ—Ä ‚Üí Nginx (–ø–æ—Ä—Ç 80) ‚Üí {
    ‚îú‚îÄ‚îÄ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (CSS/JS/HTML) - –æ—Ç–¥–∞–µ—Ç Nginx
    ‚îî‚îÄ‚îÄ API –∑–∞–ø—Ä–æ—Å—ã (/api/*) - –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ Node.js (–ø–æ—Ä—Ç 8080)
}
```

## üåê –ù–û–í–´–ï –ê–î–†–ï–°–ê:

- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç:** http://79.174.85.87
- **API:** http://79.174.85.87/api
- **–¢–µ—Å—Ç:** http://79.174.85.87/test.html

## üîê –î–ê–ù–ù–´–ï –í–•–û–î–ê:

```
–õ–æ–≥–∏–Ω:    admin
–ü–∞—Ä–æ–ª—å:   CaMBeJI30091994
Email:    nazarian.samvel@yandex.ru
```

## ‚öôÔ∏è –ß–¢–û –î–ï–õ–ê–ï–¢ –°–ö–†–ò–ü–¢:

1. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Nginx** (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
2. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –¥–ª—è CRM
3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** 
4. **–ó–∞–ø—É—Å–∫–∞–µ—Ç API —Å–µ—Ä–≤–µ—Ä** –≤ —Ñ–æ–Ω–µ (–ø–æ—Ä—Ç 8080)
5. **–ó–∞–ø—É—Å–∫–∞–µ—Ç Nginx** (–ø–æ—Ä—Ç 80)
6. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∏ —Ñ–∞–π—Ä–≤–æ–ª
7. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üìä –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´:

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ Nginx –∑–∞–ø—É—â–µ–Ω –∏ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80
- ‚úÖ API —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8080  
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã

## üîß –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–ò–°–¢–ï–ú–û–ô:

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx:
```bash
sudo systemctl restart nginx
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API:
```bash
kill $(cat /root/Crm/logs/api.pid)
cd /root/Crm && nohup node server_api_only.js > logs/api.log 2>&1 &
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
# –õ–æ–≥–∏ Nginx
tail -f /var/log/nginx/crm_error.log
tail -f /var/log/nginx/crm_access.log

# –õ–æ–≥–∏ API
tail -f /root/Crm/logs/api.log
tail -f /root/Crm/logs/error.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
systemctl status nginx      # –°—Ç–∞—Ç—É—Å Nginx
ps aux | grep node         # –ü—Ä–æ—Ü–µ—Å—Å—ã Node.js
netstat -tulpn | grep :80  # –ü–æ—Ä—Ç 80
netstat -tulpn | grep :8080 # –ü–æ—Ä—Ç 8080
```

## üõ†Ô∏è –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú:

### –ï—Å–ª–∏ Nginx –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
nginx -t                    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
systemctl status nginx     # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
journalctl -u nginx        # –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
```

### –ï—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
curl http://127.0.0.1:8080/api/health  # –¢–µ—Å—Ç API
cat /root/Crm/logs/api.log              # –õ–æ–≥–∏ API
```

### –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:
```bash
curl -I http://79.174.85.87/css/styles.css  # –¢–µ—Å—Ç CSS
ls -la /root/Crm/public/css/                 # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
```

## üéâ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –≠–¢–û–ì–û –†–ï–®–ï–ù–ò–Ø:

1. **üöÄ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - Nginx –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
2. **üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **üíæ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ CSS/JS –Ω–∞ –≥–æ–¥
4. **üóúÔ∏è –°–∂–∞—Ç–∏–µ** - Gzip —Å–∂–∞—Ç–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
5. **üì± –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—Å—Ç—å** - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –ø–æ—Ä—Ç—É 80
6. **üîß –ü—Ä–æ—Å—Ç–æ—Ç–∞** - –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—Å—ë
7. **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢:

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `sudo ./setup_nginx.sh`:
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è CRM —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ http://79.174.85.87
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CSS –∏ JS —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å HTTP/HTTPS 
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

**–≠—Ç–æ –õ–£–ß–®–ï–ï –∏ –§–ò–ù–ê–õ–¨–ù–û–ï —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–π CRM —Å–∏—Å—Ç–µ–º—ã!** üöÄ