# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## ‚ùå –û—à–∏–±–∫–∞
```
ERROR 1050 (42S01) at line 6: Table 'users' already exists
```

## üîç –ü—Ä–∏—á–∏–Ω–∞
–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∞ —Å—Ö–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CREATE TABLE` –≤–º–µ—Å—Ç–æ `CREATE TABLE IF NOT EXISTS`.

## üöÄ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï

### –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ PuTTY:
```bash
sudo bash fix-database.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –≤–µ—Ä—Å–∏—é —Å—Ö–µ–º—ã —Å `IF NOT EXISTS`
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å—Ö–µ–º—É –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç/—Å–æ–∑–¥–∞—Å—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å—Ö–µ–º–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CREATE TABLE IF NOT EXISTS`
2. **–£–º–Ω—ã–π –∏–º–ø–æ—Ä—Ç** - —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
4. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤** - –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## üîç –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
```bash
mysql -u crm_user -p'strong_password_123!@#' construction_crm
```

### 2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
```sql
SHOW TABLES;
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin
```sql
SELECT username, email, role FROM users WHERE username = 'admin';
```

### 4. –ï—Å–ª–∏ –∞–¥–º–∏–Ω–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è
sudo bash fix-database.sh
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
mysql -u crm_user -p'strong_password_123!@#' construction_crm -e "SHOW TABLES;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin
mysql -u crm_user -p'strong_password_123!@#' construction_crm -e "SELECT username, email, role FROM users WHERE username='admin';"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 12+)
mysql -u crm_user -p'strong_password_123!@#' construction_crm -e "SELECT COUNT(*) AS table_count FROM information_schema.tables WHERE table_schema='construction_crm';"
```

## üìä –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü –≤ —Å–∏—Å—Ç–µ–º–µ:

1. **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
2. **clients** - –∫–ª–∏–µ–Ω—Ç—ã
3. **contractors** - –ø–æ–¥—Ä—è–¥—á–∏–∫–∏
4. **projects** - –ø—Ä–æ–µ–∫—Ç—ã
5. **project_tasks** - –∑–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
6. **warehouse_materials** - –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–∫–ª–∞–¥–∞
7. **material_movements** - –¥–≤–∏–∂–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
8. **timesheets** - —Ç–∞–±–µ–ª—å —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
9. **files** - —Ñ–∞–π–ª—ã
10. **system_settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
11. **system_logs** - –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã

## üîÑ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:
```bash
# –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
sudo bash deploy.sh

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
sudo systemctl status construction-crm nginx mysql
```

## üéØ –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://79.174.85.87
- **–õ–æ–≥–∏–Ω**: admin
- **–ü–∞—Ä–æ–ª—å**: admin123
- **Email**: admin@construction-crm.com

‚ö†Ô∏è **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞!**

## üîê –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: construction_crm
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î**: crm_user
- **–ü–∞—Ä–æ–ª—å –ë–î**: strong_password_123!@#
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞**: utf8mb4

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**:
```bash
mysql -u crm_user -p'strong_password_123!@#' -e "SHOW GRANTS;"
```

2. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**:
```bash
mysql -u root -p'root_password_123!@#' -e "DROP DATABASE IF EXISTS construction_crm; CREATE DATABASE construction_crm CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
bash fix-database.sh
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**:
```bash
sudo tail -f /var/log/mysql/error.log
```