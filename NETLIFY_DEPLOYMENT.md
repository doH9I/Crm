# Развертывание на Netlify

## Обзор проекта

Это веб-приложение для управления строительными проектами, построенное на React 18 с TypeScript и Material-UI.

### Технологии
- **Frontend**: React 18, TypeScript, Vite
- **UI**: Material-UI (MUI)
- **State Management**: Zustand
- **Routing**: React Router
- **Charts**: Recharts
- **PWA**: Progressive Web App
- **Styling**: Tailwind CSS

## Подготовка к развертыванию

### 1. Проверка сборки
```bash
npm run build
```
Проект должен успешно собираться без ошибок.

### 2. Структура проекта
```
dist/
├── index.html
├── assets/
│   ├── index-*.js
│   ├── mui-*.js
│   └── *.css
├── sw.js
└── manifest.webmanifest
```

## Развертывание на Netlify

### Способ 1: Автоматическое развертывание (рекомендуется)

1. **Подключение репозитория**
   - Войдите в [Netlify](https://netlify.com)
   - Нажмите "New site from Git"
   - Выберите ваш Git-репозиторий
   - Настройте параметры сборки:
     - **Build command**: `npm run build`
     - **Publish directory**: `dist`

2. **Настройка переменных окружения** (если необходимо)
   - В настройках сайта перейдите в "Environment variables"
   - Добавьте необходимые переменные

3. **Настройка домена**
   - В настройках сайта перейдите в "Domain settings"
   - Настройте кастомный домен (опционально)

### Способ 2: Ручное развертывание

1. **Сборка проекта**
   ```bash
   npm run build
   ```

2. **Загрузка файлов**
   - Войдите в [Netlify](https://netlify.com)
   - Перетащите папку `dist` в область загрузки
   - Или используйте Netlify CLI:
   ```bash
   npm install -g netlify-cli
   netlify deploy --dir=dist --prod
   ```

## Конфигурация

### Файл _redirects
Убедитесь, что файл `public/_redirects` содержит:
```
/* /index.html 200
```

### Файл netlify.toml (опционально)
```toml
[build]
  publish = "dist"
  command = "npm run build"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

## Функции для тестирования

### Основные функции
- ✅ **Аутентификация**: Вход/выход из системы
- ✅ **Дашборд**: Просмотр статистики и графиков
- ✅ **Проекты**: Управление проектами с выбором активного проекта
- ✅ **Материалы**: Управление складом и поставками
- ✅ **Сотрудники**: Управление персоналом
- ✅ **Финансы**: Управление счетами и бюджетами
- ✅ **Поставщики**: Управление поставщиками
- ✅ **Клиенты**: Управление заказчиками
- ✅ **Подрядчики**: Управление подрядчиками

### Система выбора проектов
- ✅ **Выбор проекта**: В разделе "Проекты" -> "Активные проекты"/"В планировании"
- ✅ **Фильтрация данных**: Все данные фильтруются по выбранному проекту
- ✅ **Режим "Все проекты"**: Отображение данных по всем проектам
- ✅ **Индикаторы**: Визуальные индикаторы выбранного проекта

### PWA функции
- ✅ **Установка**: Возможность установки как приложения
- ✅ **Офлайн режим**: Работа без интернета
- ✅ **Push-уведомления**: Уведомления о событиях

## Проверка после развертывания

### 1. Основная функциональность
- [ ] Главная страница загружается
- [ ] Навигация работает
- [ ] Все разделы меню доступны

### 2. Система проектов
- [ ] Переход в раздел "Проекты"
- [ ] Выбор проекта в "Активные проекты"
- [ ] Выбор проекта в "В планировании"
- [ ] Кнопка "Все проекты" работает
- [ ] Данные на дашборде обновляются при выборе проекта

### 3. Фильтрация данных
- [ ] Материалы фильтруются по проекту
- [ ] Сотрудники фильтруются по проекту
- [ ] Финансы фильтруются по проекту
- [ ] Статистика обновляется в зависимости от проекта

### 4. PWA функции
- [ ] Приложение можно установить
- [ ] Работает в офлайн режиме
- [ ] Push-уведомления (если настроены)

## Устранение проблем

### Проблема: Белая страница
**Решение**: Проверьте файл `_redirects` и убедитесь, что он содержит правильные правила.

### Проблема: 404 ошибки
**Решение**: Убедитесь, что все маршруты правильно настроены в React Router.

### Проблема: Не загружаются ресурсы
**Решение**: Проверьте пути к ресурсам и убедитесь, что они относительные.

### Проблема: Не работает PWA
**Решение**: Проверьте файл `manifest.webmanifest` и `sw.js`.

## Мониторинг

### Netlify Analytics
- Включите аналитику в настройках сайта
- Отслеживайте производительность и ошибки

### Логи
- Просматривайте логи сборки в Netlify
- Отслеживайте ошибки в консоли браузера

## Обновления

### Автоматические обновления
При использовании Git-репозитория, обновления будут автоматически развертываться при push в основную ветку.

### Ручные обновления
1. Соберите проект: `npm run build`
2. Загрузите новую версию в Netlify

## Контакты

При возникновении проблем с развертыванием:
1. Проверьте логи сборки в Netlify
2. Убедитесь, что проект собирается локально
3. Проверьте конфигурацию в файлах `_redirects` и `netlify.toml`